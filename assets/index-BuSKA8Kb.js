var Bt=Object.defineProperty;var Ft=(e,t,n)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var de=(e,t,n)=>Ft(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function L(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ht=typeof Symbol=="function"&&Symbol.observable||"@@observable",je=Ht,fe=()=>Math.random().toString(36).substring(7).split("").join("."),Wt={INIT:`@@redux/INIT${fe()}`,REPLACE:`@@redux/REPLACE${fe()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fe()}`},ee=Wt;function De(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function st(e,t,n){if(typeof e!="function")throw new Error(L(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(L(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(L(1));return n(st)(e,t)}let i=e,r=t,s=new Map,o=s,c=0,a=!1;function d(){o===s&&(o=new Map,s.forEach((m,T)=>{o.set(T,m)}))}function l(){if(a)throw new Error(L(3));return r}function f(m){if(typeof m!="function")throw new Error(L(4));if(a)throw new Error(L(5));let T=!0;d();const _=c++;return o.set(_,m),function(){if(T){if(a)throw new Error(L(6));T=!1,d(),o.delete(_),s=null}}}function h(m){if(!De(m))throw new Error(L(7));if(typeof m.type>"u")throw new Error(L(8));if(typeof m.type!="string")throw new Error(L(17));if(a)throw new Error(L(9));try{a=!0,r=i(r,m)}finally{a=!1}return(s=o).forEach(_=>{_()}),m}function C(m){if(typeof m!="function")throw new Error(L(10));i=m,h({type:ee.REPLACE})}function w(){const m=f;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(L(11));function _(){const y=T;y.next&&y.next(l())}return _(),{unsubscribe:m(_)}},[je](){return this}}}return h({type:ee.INIT}),{dispatch:h,subscribe:f,getState:l,replaceReducer:C,[je]:w}}function jt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:ee.INIT})>"u")throw new Error(L(12));if(typeof n(void 0,{type:ee.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(L(13))})}function zt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const i=Object.keys(n);let r;try{jt(n)}catch(s){r=s}return function(o={},c){if(r)throw r;let a=!1;const d={};for(let l=0;l<i.length;l++){const f=i[l],h=n[f],C=o[f],w=h(C,c);if(typeof w>"u")throw c&&c.type,new Error(L(14));d[f]=w,a=a||w!==C}return a=a||i.length!==Object.keys(o).length,a?d:o}}function te(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function xt(...e){return t=>(n,i)=>{const r=t(n,i);let s=()=>{throw new Error(L(15))};const o={getState:r.getState,dispatch:(a,...d)=>s(a,...d)},c=e.map(a=>a(o));return s=te(...c)(r.dispatch),{...r,dispatch:s}}}function Kt(e){return De(e)&&"type"in e&&typeof e.type=="string"}var ot=Symbol.for("immer-nothing"),ze=Symbol.for("immer-draftable"),S=Symbol.for("immer-state");function O(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var j=Object.getPrototypeOf;function D(e){return!!e&&!!e[S]}function b(e){var t;return e?ct(e)||Array.isArray(e)||!!e[ze]||!!((t=e.constructor)!=null&&t[ze])||oe(e)||ce(e):!1}var Ut=Object.prototype.constructor.toString();function ct(e){if(!e||typeof e!="object")return!1;const t=j(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Ut}function ne(e,t){se(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function se(e){const t=e[S];return t?t.type_:Array.isArray(e)?1:oe(e)?2:ce(e)?3:0}function _e(e,t){return se(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function at(e,t,n){const i=se(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function qt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function oe(e){return e instanceof Map}function ce(e){return e instanceof Set}function R(e){return e.copy_||e.base_}function ke(e,t){if(oe(e))return new Map(e);if(ce(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ct(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[S];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const o=r[s],c=i[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(i[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[o]})}return Object.create(j(e),i)}else{const i=j(e);if(i!==null&&n)return{...e};const r=Object.create(i);return Object.assign(r,e)}}function Pe(e,t=!1){return ae(e)||D(e)||!b(e)||(se(e)>1&&(e.set=e.add=e.clear=e.delete=Gt),Object.freeze(e),t&&Object.entries(e).forEach(([n,i])=>Pe(i,!0))),e}function Gt(){O(2)}function ae(e){return Object.isFrozen(e)}var Yt={};function P(e){const t=Yt[e];return t||O(0,e),t}var q;function lt(){return q}function Vt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xe(e,t){t&&(P("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ce(e){we(e),e.drafts_.forEach(Xt),e.drafts_=null}function we(e){e===q&&(q=e.parent_)}function Ke(e){return q=Vt(q,e)}function Xt(e){const t=e[S];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ue(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[S].modified_&&(Ce(t),O(4)),b(e)&&(e=ie(t,e),t.parent_||re(t,e)),t.patches_&&P("Patches").generateReplacementPatches_(n[S].base_,e,t.patches_,t.inversePatches_)):e=ie(t,n,[]),Ce(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ot?e:void 0}function ie(e,t,n){if(ae(t))return t;const i=t[S];if(!i)return ne(t,(r,s)=>qe(e,i,t,r,s,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return re(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let s=r,o=!1;i.type_===3&&(s=new Set(r),r.clear(),o=!0),ne(s,(c,a)=>qe(e,i,r,c,a,n,o)),re(e,r,!1),n&&e.patches_&&P("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function qe(e,t,n,i,r,s,o){if(D(r)){const c=s&&t&&t.type_!==3&&!_e(t.assigned_,i)?s.concat(i):void 0,a=ie(e,r,c);if(at(n,i,a),D(a))e.canAutoFreeze_=!1;else return}else o&&n.add(r);if(b(r)&&!ae(r)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ie(e,r),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&re(e,r)}}function re(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Pe(t,n)}function Jt(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:lt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=Be;n&&(r=[i],s=G);const{revoke:o,proxy:c}=Proxy.revocable(r,s);return i.draft_=c,i.revoke_=o,c}var Be={get(e,t){if(t===S)return e;const n=R(e);if(!_e(n,t))return Qt(e,n,t);const i=n[t];return e.finalized_||!b(i)?i:i===he(e.base_,t)?(pe(e),e.copy_[t]=Le(i,e)):i},has(e,t){return t in R(e)},ownKeys(e){return Reflect.ownKeys(R(e))},set(e,t,n){const i=ut(R(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const r=he(R(e),t),s=r==null?void 0:r[S];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(qt(n,r)&&(n!==void 0||_e(e.base_,t)))return!0;pe(e),Ee(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return he(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,pe(e),Ee(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=R(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){O(11)},getPrototypeOf(e){return j(e.base_)},setPrototypeOf(){O(12)}},G={};ne(Be,(e,t)=>{G[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});G.deleteProperty=function(e,t){return G.set.call(this,e,t,void 0)};G.set=function(e,t,n){return Be.set.call(this,e[0],t,n,e[0])};function he(e,t){const n=e[S];return(n?R(n):e)[t]}function Qt(e,t,n){var r;const i=ut(t,n);return i?"value"in i?i.value:(r=i.get)==null?void 0:r.call(e.draft_):void 0}function ut(e,t){if(!(t in e))return;let n=j(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=j(n)}}function Ee(e){e.modified_||(e.modified_=!0,e.parent_&&Ee(e.parent_))}function pe(e){e.copy_||(e.copy_=ke(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Zt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(a=s,...d){return o.produce(a,l=>n.call(this,l,...d))}}typeof n!="function"&&O(6),i!==void 0&&typeof i!="function"&&O(7);let r;if(b(t)){const s=Ke(this),o=Le(t,void 0);let c=!0;try{r=n(o),c=!1}finally{c?Ce(s):we(s)}return xe(s,i),Ue(r,s)}else if(!t||typeof t!="object"){if(r=n(t),r===void 0&&(r=t),r===ot&&(r=void 0),this.autoFreeze_&&Pe(r,!0),i){const s=[],o=[];P("Patches").generateReplacementPatches_(t,r,s,o),i(s,o)}return r}else O(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...c)=>this.produceWithPatches(o,a=>t(a,...c));let i,r;return[this.produce(t,n,(o,c)=>{i=o,r=c}),i,r]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){b(e)||O(8),D(e)&&(e=en(e));const t=Ke(this),n=Le(e,void 0);return n[S].isManual_=!0,we(t),n}finishDraft(e,t){const n=e&&e[S];(!n||!n.isManual_)&&O(9);const{scope_:i}=n;return xe(i,t),Ue(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}n>-1&&(t=t.slice(n+1));const i=P("Patches").applyPatches_;return D(e)?i(e,t):this.produce(e,r=>i(r,t))}};function Le(e,t){const n=oe(e)?P("MapSet").proxyMap_(e,t):ce(e)?P("MapSet").proxySet_(e,t):Jt(e,t);return(t?t.scope_:lt()).drafts_.push(n),n}function en(e){return D(e)||O(10,e),dt(e)}function dt(e){if(!b(e)||ae(e))return e;const t=e[S];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ke(e,t.scope_.immer_.useStrictShallowCopy_)}else n=ke(e,!0);return ne(n,(i,r)=>{at(n,i,dt(r))}),t&&(t.finalized_=!1),n}var M=new Zt,ft=M.produce;M.produceWithPatches.bind(M);M.setAutoFreeze.bind(M);M.setUseStrictShallowCopy.bind(M);M.applyPatches.bind(M);M.createDraft.bind(M);M.finishDraft.bind(M);function ht(e){return({dispatch:n,getState:i})=>r=>s=>typeof s=="function"?s(n,i,e):r(s)}var tn=ht(),nn=ht,rn=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?te:te.apply(null,arguments)},sn=e=>e&&typeof e.match=="function";function U(e,t){function n(...i){if(t){let r=t(...i);if(!r)throw new Error(v(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:i[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=i=>Kt(i)&&i.type===e,n}var pt=class x extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,x.prototype)}static get[Symbol.species](){return x}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new x(...t[0].concat(this)):new x(...t.concat(this))}};function Ge(e){return b(e)?ft(e,()=>{}):e}function Ye(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function on(e){return typeof e=="boolean"}var cn=()=>function(t){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=t??{};let o=new pt;return n&&(on(n)?o.push(tn):o.push(nn(n.extraArgument))),o},an="RTK_autoBatch",Ve=e=>t=>{setTimeout(t,e)},ln=(e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let r=!0,s=!1,o=!1;const c=new Set,a=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ve(10):e.type==="callback"?e.queueNotification:Ve(e.timeout),d=()=>{o=!1,s&&(s=!1,c.forEach(l=>l()))};return Object.assign({},i,{subscribe(l){const f=()=>r&&l(),h=i.subscribe(f);return c.add(l),()=>{h(),c.delete(l)}},dispatch(l){var f;try{return r=!((f=l==null?void 0:l.meta)!=null&&f[an]),s=!r,s&&(o||(o=!0,a(d))),i.dispatch(l)}finally{r=!0}}})},un=e=>function(n){const{autoBatch:i=!0}=n??{};let r=new pt(e);return i&&r.push(ln(typeof i=="object"?i:void 0)),r};function dn(e){const t=cn(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let c;if(typeof n=="function")c=n;else if(De(n))c=zt(n);else throw new Error(v(1));let a;typeof i=="function"?a=i(t):a=t();let d=te;r&&(d=rn({trace:!1,...typeof r=="object"&&r}));const l=xt(...a),f=un(l);let h=typeof o=="function"?o(f):f();const C=d(...h);return st(c,s,C)}function yt(e){const t={},n=[];let i;const r={addCase(s,o){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(v(28));if(c in t)throw new Error(v(29));return t[c]=o,r},addMatcher(s,o){return n.push({matcher:s,reducer:o}),r},addDefaultCase(s){return i=s,r}};return e(r),[t,n,i]}function fn(e){return typeof e=="function"}function hn(e,t){let[n,i,r]=yt(t),s;if(fn(e))s=()=>Ge(e());else{const c=Ge(e);s=()=>c}function o(c=s(),a){let d=[n[a.type],...i.filter(({matcher:l})=>l(a)).map(({reducer:l})=>l)];return d.filter(l=>!!l).length===0&&(d=[r]),d.reduce((l,f)=>{if(f)if(D(l)){const C=f(l,a);return C===void 0?l:C}else{if(b(l))return ft(l,h=>f(h,a));{const h=f(l,a);if(h===void 0){if(l===null)return l;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return l},c)}return o.getInitialState=s,o}var pn=(e,t)=>sn(e)?e.match(t):e(t);function yn(...e){return t=>e.some(n=>pn(n,t))}var gn="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",mn=(e=21)=>{let t="",n=e;for(;n--;)t+=gn[Math.random()*64|0];return t},_n=["name","message","stack","code"],ye=class{constructor(e,t){de(this,"_type");this.payload=e,this.meta=t}},Xe=class{constructor(e,t){de(this,"_type");this.payload=e,this.meta=t}},kn=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of _n)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},Fe=(()=>{function e(t,n,i){const r=U(t+"/fulfilled",(a,d,l,f)=>({payload:a,meta:{...f||{},arg:l,requestId:d,requestStatus:"fulfilled"}})),s=U(t+"/pending",(a,d,l)=>({payload:void 0,meta:{...l||{},arg:d,requestId:a,requestStatus:"pending"}})),o=U(t+"/rejected",(a,d,l,f,h)=>({payload:f,error:(i&&i.serializeError||kn)(a||"Rejected"),meta:{...h||{},arg:l,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(a==null?void 0:a.name)==="AbortError",condition:(a==null?void 0:a.name)==="ConditionError"}}));function c(a){return(d,l,f)=>{const h=i!=null&&i.idGenerator?i.idGenerator(a):mn(),C=new AbortController;let w,F;function m(_){F=_,C.abort()}const T=async function(){var y,E;let _;try{let k=(y=i==null?void 0:i.condition)==null?void 0:y.call(i,a,{getState:l,extra:f});if(wn(k)&&(k=await k),k===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const I=new Promise((g,$)=>{w=()=>{$({name:"AbortError",message:F||"Aborted"})},C.signal.addEventListener("abort",w)});d(s(h,a,(E=i==null?void 0:i.getPendingMeta)==null?void 0:E.call(i,{requestId:h,arg:a},{getState:l,extra:f}))),_=await Promise.race([I,Promise.resolve(n(a,{dispatch:d,getState:l,extra:f,requestId:h,signal:C.signal,abort:m,rejectWithValue:(g,$)=>new ye(g,$),fulfillWithValue:(g,$)=>new Xe(g,$)})).then(g=>{if(g instanceof ye)throw g;return g instanceof Xe?r(g.payload,h,a,g.meta):r(g,h,a)})])}catch(k){_=k instanceof ye?o(null,h,a,k.payload,k.meta):o(k,h,a)}finally{w&&C.signal.removeEventListener("abort",w)}return i&&!i.dispatchConditionRejection&&o.match(_)&&_.meta.condition||d(_),_}();return Object.assign(T,{abort:m,requestId:h,arg:a,unwrap(){return T.then(Cn)}})}}return Object.assign(c,{pending:s,rejected:o,fulfilled:r,settled:yn(o,r),typePrefix:t})}return e.withTypes=()=>e,e})();function Cn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function wn(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var En=Symbol.for("rtk-slice-createasyncthunk");function Ln(e,t){return`${e}/${t}`}function Tn({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[En];return function(r){const{name:s,reducerPath:o=s}=r;if(!s)throw new Error(v(11));const c=(typeof r.reducers=="function"?r.reducers(Mn()):r.reducers)||{},a=Object.keys(c),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(p,y){const E=typeof p=="string"?p:p.type;if(!E)throw new Error(v(12));if(E in d.sliceCaseReducersByType)throw new Error(v(13));return d.sliceCaseReducersByType[E]=y,l},addMatcher(p,y){return d.sliceMatchers.push({matcher:p,reducer:y}),l},exposeAction(p,y){return d.actionCreators[p]=y,l},exposeCaseReducer(p,y){return d.sliceCaseReducersByName[p]=y,l}};a.forEach(p=>{const y=c[p],E={reducerName:p,type:Ln(s,p),createNotation:typeof r.reducers=="function"};On(y)?bn(E,y,l,t):In(E,y,l)});function f(){const[p={},y=[],E=void 0]=typeof r.extraReducers=="function"?yt(r.extraReducers):[r.extraReducers],k={...p,...d.sliceCaseReducersByType};return hn(r.initialState,I=>{for(let g in k)I.addCase(g,k[g]);for(let g of d.sliceMatchers)I.addMatcher(g.matcher,g.reducer);for(let g of y)I.addMatcher(g.matcher,g.reducer);E&&I.addDefaultCase(E)})}const h=p=>p,C=new Map;let w;function F(p,y){return w||(w=f()),w(p,y)}function m(){return w||(w=f()),w.getInitialState()}function T(p,y=!1){function E(I){let g=I[p];return typeof g>"u"&&y&&(g=m()),g}function k(I=h){const g=Ye(C,y,()=>new WeakMap);return Ye(g,I,()=>{const $={};for(const[Dt,Pt]of Object.entries(r.selectors??{}))$[Dt]=Sn(Pt,I,m,y);return $})}return{reducerPath:p,getSelectors:k,get selectors(){return k(E)},selectSlice:E}}const _={name:s,reducer:F,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:m,...T(o),injectInto(p,{reducerPath:y,...E}={}){const k=y??o;return p.inject({reducerPath:k,reducer:F},E),{..._,...T(k,!0)}}};return _}}function Sn(e,t,n,i){function r(s,...o){let c=t(s);return typeof c>"u"&&i&&(c=n()),e(c,...o)}return r.unwrapped=e,r}var le=Tn();function Mn(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function In({type:e,reducerName:t,createNotation:n},i,r){let s,o;if("reducer"in i){if(n&&!vn(i))throw new Error(v(17));s=i.reducer,o=i.prepare}else s=i;r.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?U(e,o):U(e))}function On(e){return e._reducerDefinitionType==="asyncThunk"}function vn(e){return e._reducerDefinitionType==="reducerWithPrepare"}function bn({type:e,reducerName:t},n,i,r){if(!r)throw new Error(v(18));const{payloadCreator:s,fulfilled:o,pending:c,rejected:a,settled:d,options:l}=n,f=r(e,s,l);i.exposeAction(t,f),o&&i.addCase(f.fulfilled,o),c&&i.addCase(f.pending,c),a&&i.addCase(f.rejected,a),d&&i.addMatcher(f.settled,d),i.exposeCaseReducer(t,{fulfilled:o||X,pending:c||X,rejected:a||X,settled:d||X})}function X(){}function v(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const $n="---------------------------------------------------------",An=`

`,Nn=`
`;function Rn(e){return{data:e.split($n).filter(Dn).map(Pn).map(Fn),getCategories(){return this.data.map(t=>t.title)},getCategoryLinkTypes(t){const n=this.data.find(i=>i.title===t).links.map(i=>i.type);return Array.from(new Set(n))},getCategoryLinks(t){return this.data.find(n=>n.title===t).links},getLinkTypes(){const t=this.data.map(n=>n.links).reduce((n,i)=>[...n,...i],[]).map(n=>n.type);return Array.from(new Set(t))},countLinkItems(t){return this.data.find(n=>n.title===t).links.length},getLinks(){return this.data.reduce((t,n)=>[...t,...n.links],[])}}}function Dn(e){return!!e}function Pn(e){return e.trim()}function Bn(e,t){const n=e.split(Nn);return{description:n[0],src:n[1],type:n[2]?n[2].slice(3):"",category:t}}function Fn(e){const t=e.split(An),n=t[0].slice(2);return{title:n,links:t.slice(1).map(i=>Bn(i,n))}}const W={links:null,createKey(){return`links-${Math.random().toFixed(10).slice(2)}`},loadLinks(){return Object.keys(localStorage).filter(e=>e.startsWith("links")).map(e=>JSON.parse(localStorage.getItem(e)))},setLink(e){const t=this.createKey(),n={...e,_id:t};return localStorage.setItem(t,JSON.stringify(n)),n},updateLink(e,t){const n={...t,_id:e};return localStorage.setItem(e,JSON.stringify(n)),n},removeLink(e){return localStorage.removeItem(e),e},getLinks(){return this.links},init(){this.links=this.loadLinks()}};async function Hn(){const e=await Wn("/linkfield/initialList.txt"),t=Rn(e).getLinks();localStorage.length||t.forEach(n=>W.setLink(n)),W.init()}async function Wn(e){return await(await fetch(e)).text()}const ue={loadLinks:()=>new Promise((e,t)=>{setTimeout(()=>{e(W.getLinks())},1e3)}),createLink:e=>new Promise((t,n)=>{setTimeout(()=>{t(W.setLink(e))},1e3)}),updateLink:(e,t)=>new Promise((n,i)=>{setTimeout(()=>{n(W.updateLink(e,t))},1e3)}),deleteLink:e=>new Promise((t,n)=>{setTimeout(()=>{t(W.removeLink(e))},1e3)})},gt=le({name:"links",initialState:{data:[{category:"HTML & CSS",src:"https://www.joshwcomeau.com/css/transforms/",description:"The World of CSS Transforms",type:"guide"}]},reducers:{editedLinkIdSelected:(e,t)=>{e.editedId=t.payload}},extraReducers:e=>{e.addCase(Te.pending,(t,n)=>{t.status="loading"}).addCase(Te.fulfilled,(t,n)=>{const i=n.payload,r=t.data.findIndex(s=>s._id==i);t.removedLinkCategory=t.data[r].category,t.data.splice(r,1),t.removedId=i,t.status="idle"}).addCase(Se.pending,(t,n)=>{t.status="loading"}).addCase(Se.fulfilled,(t,n)=>{t.data.push({...n.payload}),t.createdId=n.payload._id,t.status="idle"}).addCase(Me.pending,(t,n)=>{t.status="loading"}).addCase(Me.fulfilled,(t,n)=>{const{_id:i,src:r,type:s,description:o,category:c}=n.payload,a=t.data.find(d=>d._id==i);a.src=r,a.type=s,a.description=o,a.category=c,t.editedLink={...n.payload},t.status="idle"})}}),jn=gt.reducer,Te=Fe("links/linkRemoved",async e=>await ue.deleteLink(e)),Se=Fe("links/linkCreated",async e=>await ue.createLink(e)),Me=Fe("links/linkEdited",async e=>await ue.updateLink(e._id,e)),{editedLinkIdSelected:zn}=gt.actions,xn=e=>e.links.data.find(t=>t._id==e.links.createdId),Kn=e=>e.links.data.find(t=>t._id==e.links.editedId),Un=e=>e.links.editedLink,qn=e=>{const t={};return e.links.data.forEach(({category:n})=>{n in t?t[n]+=1:t[n]=1}),t},He=e=>Array.from(new Set(e.links.data.map(t=>t.category))),mt=(e,t)=>e.links.data.filter(n=>n.category===t),Gn=e=>Array.from(new Set(e.links.data.map(t=>t.type))),Yn=(e,t)=>{const n=mt(e,t);return Array.from(new Set(n.map(i=>i.type)))},Vn=e=>e.links.removedId,Xn=e=>e.links.removedLinkCategory,Jn=e=>e.links.status,_t=le({name:"ui",initialState:{menuCategory:"",isMenuOpened:!1,isSmallScreen:!1,isSettingsWindowOpened:!1,linkFormMode:""},reducers:{menuCategorySelected:(e,t)=>{e.menuCategory=t.payload},categoryMenuToggled:e=>{e.isMenuOpened=!e.isMenuOpened},screenSizeChanged:(e,t)=>{e.isSmallScreen=t.payload},settingsWindowToggled:e=>{e.isSettingsWindowOpened=!e.isSettingsWindowOpened},linkFormModeChanged:(e,t)=>{e.linkFormMode=t.payload}}}),Qn=_t.reducer,{menuCategorySelected:kt,categoryMenuToggled:Ct,screenSizeChanged:Zn,settingsWindowToggled:Y,linkFormModeChanged:V}=_t.actions,wt=e=>e.ui.menuCategory,ei=e=>e.ui.isMenuOpened,Et=e=>e.ui.isSmallScreen,ti=e=>e.ui.linkFormMode,Lt=le({name:"filters",initialState:{linkType:{category:"",type:""}},reducers:{linkTypeSelected:(e,t)=>{e.linkType={...t.payload}}}}),ni=Lt.reducer,{linkTypeSelected:ii}=Lt.actions,ri=(e,t)=>e.filters.linkType,Tt=le({name:"action",initialState:{action:""},reducers:{actionHappened:(e,t)=>{e.action=t.payload}}}),si=Tt.reducer,{actionHappened:Je}=Tt.actions,z=e=>e.action.action;function oi(e){return dn({reducer:{links:jn,ui:Qn,filters:ni,action:si},middleware:t=>t().concat(ai),enhancers:t=>t().concat(ci),preloadedState:e})}const ci=e=>(t,n,i)=>{const r=e(t,n,i);return{...r,dispatch:o=>{const c=r.dispatch(o);return r.dispatch(Je(o.type)),r.dispatch(Je("")),c}}};function ai(e){return t=>n=>(console.log(n.type),t(n))}function li(e){const t=oi(e);return{store:t,useSelector(n){return(...i)=>n(t.getState(),...i)},useDispatch(){return t.dispatch}}}function A(e,t,n){n.forEach(i=>e[i.name]=t.useSelector(i))}function N(e,t,n){n.forEach(i=>e[i.name]=i(t.useDispatch()))}const ui="menu-panel__menu-opener",di="category-menu",Ie="page__category-menu_visible",K="category-menu__item",fi="category-menu__header",hi="category-menu__link",pi="category-menu__link-total",Oe="page__menu-opener_hidden",yi="content",ve="page__content_hidden",be="category",St="category__header",Mt="category__header_hidden",gi="category__header-sortname",mi="category__header-select",It="link-list",Q="link-list__item",_i="link-list__item-content",Ot="link-list__item-type",vt="link-list__item-description",bt="link-list__item-controls",H="link-list__item-controls_hidden",ki="page__link-list-controls_adaptive",Qe="link-list__item-button",$t="link-list__item-button_edit",At="link-list__item-button_close",Ci="settings-menu",wi="settings-menu__link-form-opener",Ei="settings-window",Li="page__settings-window_hidden",Ti="link-window__close-btn",Si="link-window__form",J="link-window__btn_hide",Mi="link-window__form-input",Ze="theme__button_initial",Ii="theme__link_initial",Z="theme__link_initial-selected",et="theme__link_initial-highlighted",We="theme__color-initial_mute",Oi="theme__category-menu-item_initial",$e="theme__category-menu-item_initial-selected",vi="theme__category-menu-item_initial-adaptive";function tt(e,t,n){let i="";return i+=`<li class="${K} ${Oi} ${vi}" data-category="${e}">`,i+=`<h2 class="${fi}">`,i+=`<a class="${hi}" href=#${t}>`,i+=`${e} `,i+=`<span class="${pi} ${We}">${n}</span>`,i+="</a>",i+="</h2>",i+="</li>",i}const u={getContent:()=>document.querySelector(`.${yi}`),getCategory:e=>document.querySelector(`.${be}[data-category="${e}"]`),getCategoryByElem:e=>e.closest(`.${be}`),getLinkList:e=>document.querySelector(`.${It}[data-category="${e}"]`),getSettingsWindow:()=>document.querySelector(`.${Ei}`),getCloseButton:e=>e.closest(`.${Ti}`),linkForm:{get:()=>document.querySelector(`.${Si}`),getCategorySelect:e=>e.querySelector('select[name="category"]'),getTypesSelect:e=>e.querySelector('select[name="type"]')},settingsMenu:{get:()=>document.querySelector(`.${Ci}`),getOpenButton:e=>e.closest(`.${wi}`)},link:{get:e=>e.closest(`.${Q}`),getById:(e,t)=>e.querySelector(`.${Q}[data-linkid="${t}"]`),getRemoveButton:e=>e.closest(`.${At}`),getEditButton:e=>e.closest(`.${$t}`),getLast:e=>e.querySelector(`.${Q}:last-child`),getCurrentSelected:()=>document.querySelector(`.${Z}`),getControls:e=>e.querySelector(`.${bt}`),getType:e=>e.querySelector(`.${Ot}`),getTopic:e=>e.querySelector(`.${vt}`)},categoryHeader:{get:e=>e.querySelector(`.${St}`),getById:e=>document.getElementById(e),getSelect:e=>e.querySelector("select"),getOptionByType:(e,t)=>e.querySelector(`option[data-type="${t}"]`)},categoryMenu:{getMenu:()=>document.querySelector(`.${di}`),getItem:e=>e.closest(`.${K}`),getHighlightedItem:e=>e.querySelector(`.${$e}`),getItemByCategory:(e,t)=>e.querySelector(`.${K}[data-category="${t}"]`),getItemTotal:(e,t)=>e.querySelector(`.${K}[data-category="${t}"] a > span`),getOpener:()=>document.querySelector(`.${ui}`),getLastItem:e=>e.querySelector(`.${K}:last-child`)}};function Nt(){let e=null;return function(r,s){r.addEventListener("mouseover",o=>t(o,r,s)),r.addEventListener("mouseout",o=>n(o,r,s))};function t(i,r,s){e||(e=r,s(e))}function n(i,r,s){if(!e)return;let o=event.relatedTarget;for(;o;){if(o==e)return;o=o.parentNode}s(e),e=null}}function bi(e){const{top:t,height:n}=e.getBoundingClientRect();return t>0&&t<window.innerHeight-n}function B(e){return e.split(" ").join("-")}function Ae(e){return e.split("-").join(" ")}function Ne(){const e=window.location.hash;return e?Ae(e.slice(1)):""}function Re(){return window.innerWidth<=650}function nt(e){history.pushState(null,null,`#${e}`)}function ge(e){const t=e.getBoundingClientRect();t.top<0?e.scrollIntoView():t.top>window.innerHeight-t.height&&e.scrollIntoView(!1)}class $i{constructor(t,n,i){this.node=u.categoryMenu.getMenu(),this.create(t),this.highlightItem(n),this.node.addEventListener("click",r=>{const s=u.categoryMenu.getItem(r.target);s&&i(s.dataset.category,r)})}highlightItem(t){if(!t)return;const n=u.categoryMenu.getHighlightedItem(this.node);n&&n.classList.remove(`${$e}`);const i=u.categoryMenu.getItemByCategory(this.node,t);i&&i.classList.add(`${$e}`)}changeLinkCount(t){const{category:n,total:i}=t;u.categoryMenu.getItemTotal(this.node,n).textContent=i,i===0&&u.categoryMenu.getItemByCategory(this.node,n).remove()}createItem(t){const{category:n,total:i}=t;this.node.insertAdjacentHTML("beforeend",tt(n,B(n),i))}create(t){this.node.innerHTML=Object.entries(t).reduce((n,[i,r])=>n+tt(i,B(i),r),"")}update(t,n,i){t&&this.highlightItem(t),n&&this.changeLinkCount(n),i&&this.createItem(i)}}const Ai=e=>t=>e(kt(t)),Ni=e=>()=>e(Ct()),Ri=e=>t=>e(Zn(t)),Di=e=>t=>e(ii(t)),Pi=e=>t=>e(Te(t)),Bi=e=>(t,n,i)=>{e(kt(t)),n&&(i.preventDefault(),e(Ct()))},Fi=e=>t=>{e(Y()),e(zn(t)),e(V("editing"))},Hi=e=>()=>{e(Y()),e(V("creation"))},Wi=e=>()=>{e(Y()),e(V(""))},ji=e=>t=>{e(Y()),e(V("")),e(Se(t))},zi=e=>t=>{e(Y()),e(V("")),e(Me(t))};let xi=class{constructor(t){this.component=null,this.categories=null,this.category=null,A(this,t,[qn,wt,Et,z]),N(this,t,[Bi]),this.clickMenu=(n,i)=>{const r=this.selectIsSmallScreen();this.clickOnCategoryMenu(n,r,i)},this.updateActions={"ui/menuCategorySelected":!0,"links/linkRemoved/fulfilled":!0,"links/linkCreated/fulfilled":!0,"links/linkEdited/fulfilled":!0}}mount(){const t=this.selectCountLinksByCategory();this.component=new $i(Ki(t),this.selectMenuCategory(),this.clickMenu),this.categories=t}update(){const t=this.selectAction();if(t in this.updateActions)switch(t){case"ui/menuCategorySelected":{this.component.update(this.selectMenuCategory());return}case"links/linkRemoved/fulfilled":case"links/linkCreated/fulfilled":case"links/linkEdited/fulfilled":{const n=this.selectCountLinksByCategory();for(let i in n)if(!(i in this.categories)){this.component.update(null,null,{category:i,total:1}),this.categories=n;return}for(let i in this.categories){const r=this.categories[i],s=n[i];r!==s&&this.component.update(null,{category:i,total:s||0})}this.categories=n;return}}}};function Ki(e){const t=Object.entries(e);return t.sort((n,i)=>n[0]>i[0]?1:-1),Object.fromEntries(t)}class Ui{constructor(t){this.node=u.categoryMenu.getOpener(),this.content=u.getContent(),this.menu=u.categoryMenu.getMenu(),this.node.addEventListener("click",n=>{t()})}open(){this.content.classList.add(`${ve}`),this.menu.classList.add(`${Ie}`),this.node.classList.add(`${Oe}`)}close(){this.content.classList.remove(`${ve}`),this.menu.classList.remove(`${Ie}`),this.node.classList.remove(`${Oe}`)}update(t){t?this.open():this.close()}}let qi=class{constructor(t){this.component=null,A(this,t,[ei,z]),N(this,t,[Ni]),this.updateActions={"ui/categoryMenuToggled":!0}}mount(){this.component=new Ui(this.toggleMenuOpener)}update(){this.selectAction()in this.updateActions&&this.component.update(this.selectMenuVisibility())}};class Gi{constructor(t,n){this.content=u.getContent(),this.menu=u.categoryMenu.getMenu(),this.DY=50,window.addEventListener("resize",()=>{const r=Re();if(t(r),!r){const s=Ne();s&&(this.scrollToCategory(s,r),ge(this.getMenuItemByCategory(s)))}r||(this.content.classList.remove(`${ve}`),this.menu.classList.remove(`${Ie}`),u.categoryMenu.getOpener().classList.remove(`${Oe}`))}),this.content.addEventListener("scroll",()=>{this.focusOnCategoryMenuItem(n,this.content)});const i=Ne();i&&ge(this.getMenuItemByCategory(i))}scrollToCategory(t,n){if(!t)return;const i=B(t),r=u.categoryHeader.getById(i);(n?window:this.content).scrollTo(0,r.offsetTop-(n?this.DY:0)),nt(i)}focusOnCategoryMenuItem(t,n){const i=Re();let r;if(i||(n.scrollHeight-n.scrollTop-n.clientHeight===0?r=u.categoryMenu.getLastItem(this.menu):r=this.getMenuItemByPosition(),!r)||r.classList.contains("highlight"))return;const s=B(r.dataset.category);nt(s),t(r.dataset.category),ge(r)}getMenuItemByPosition(){let t=null;const n=document.documentElement.clientWidth/2,i=document.elementFromPoint(n,20),r=u.getCategoryByElem(i);if(r){const s=r.dataset.category;t=this.getMenuItemByCategory(s)}return t}getMenuItemByCategory(t){return u.categoryMenu.getItemByCategory(this.menu,t)}update(t,n,i){n&&this.scrollToCategory(t,n),i&&this.scrollToCategory(i,!1)}}class Yi{constructor(t){this.component=null,A(this,t,[wt,Et,z,He]),N(this,t,[Ri,Ai]),this.updateActions={"ui/categoryMenuToggled":!0,"ui/screenSizeChanged":!0,"links/linkCreated/fulfilled":!0}}mount(){this.categories=this.selectLinkCategories(),this.component=new Gi(this.changeScreenSize,this.pickMenuCategory)}update(){const t=this.selectAction();if(t in this.updateActions)if(t==="links/linkCreated/fulfilled"){const n=this.selectLinkCategories();for(let i of n)if(!this.categories.includes(i)){this.component.update(null,null,i),this.categories=n;return}}else this.component.update(this.selectMenuCategory(),this.selectIsSmallScreen())}}class Vi{constructor(){this.node=u.getContent()}update(){}}function Xi(e,t){let n="";return n+=`<div class="${be}" data-category="${e}">`,n+=`<ul class="${It}" data-category="${e}">`,t.forEach(i=>{n+=`${Rt(i._id,i.src,i.type,i.description)}`}),n+="</ul>",n+="</div>",n}function Rt(e,t,n,i){let r="";return r+=`<li class="${Q} ${Ii}" data-linkid=${e}>`,r+=`<h3 class=${_i}>`,r+=`<span class="${Ot} ${We}">${n}</span> `,r+=`<a class="${vt}" href=${t} target="_blank">${i}</a>`,r+=`<div class="${bt} ${H} ${ki}">`,r+=`<span><a class="${Qe} ${$t} ${Ze}" data-linkid=${e}>&#128393;</a></span>`,r+=`<span><a class="${Qe} ${At} ${Ze}" data-linkid=${e}>&#128473;</a></span>`,r+="</div>",r+="</h3>",r+="</li>",r}let me=null;class Ji{constructor(t,n,i,r){this.category=t,this.create(t,n),this.node=u.getCategory(t),this.list=u.getLinkList(t),this.createHover=Nt(),this.node.addEventListener("click",s=>{const o=s.target,c=o.dataset.linkid,a=u.link.get(o);o===u.link.getRemoveButton(o)?(i(c),this.hideLink(o)):o===u.link.getEditButton(o)?(r(c),this.selectLink(a,u.link.getCurrentSelected()),this.currentId=c):a&&this.selectLink(a,u.link.getCurrentSelected())});for(let s of this.list.children)this.createHover(s,(...o)=>this.hoverLink(...o))}selectLink(t,n){n&&(n.classList.remove(`${Z}`),u.link.getControls(n).classList.add(`${H}`)),t.classList.add(`${Z}`),u.link.getControls(t).classList.remove(`${H}`)}hoverLink(t){if(t.classList.contains(`${Z}`))return;const n=u.link.getControls(t);me!==t?(n.classList.remove(`${H}`),me=t):(n.classList.add(`${H}`),me=null)}highlightLink(t){t.classList.add(`${et}`),setTimeout(()=>{t.classList.remove(`${et}`)},2e3)}focusLink(t){this.selectLink(t,u.link.getCurrentSelected()),bi(t)||t.scrollIntoView(!1),this.highlightLink(t)}hideLink(t){const n=u.link.get(t);n.style.visibility="hidden"}showLink(t){t.style.visibility="visible"}arrangeLinksByType(t){const i=Array.from(this.list.children).map(r=>({type:u.link.getType(r).textContent,element:r})).sort((r,s)=>r.type===t?-1:1).map(r=>r.element);this.list.append(...i)}removeLink(t){const n=u.link.getById(this.list,t);if(n){const i=n.nextElementSibling;i&&u.link.getControls(i).classList.remove(`${H}`),n.remove(),this.list.children.length||(this.node.remove(),history.pushState(null,null,""))}}createLink(t){this.list.insertAdjacentHTML("beforeend",Rt(t._id,t.src,t.type,t.description));const n=u.link.getLast(this.list);this.createHover(n,(...i)=>this.hoverLink(...i)),this.focusLink(n)}updateLink(t){const{_id:n,src:i,type:r,description:s,category:o}=t,c=u.link.getById(document,n),a=u.link.getType(c),d=u.link.getTopic(c);a.textContent=r,d.src=i,d.textContent=s,this.list.contains(c)||this.list.append(c),this.showLink(c),this.focusLink(c)}create(t,n){u.getContent().insertAdjacentHTML("beforeend",Xi(t,n))}update(t){t.linkType&&this.arrangeLinksByType(t.linkType.type),t.removedLinkId&&this.removeLink(t.removedLinkId),t.createdLinkData&&this.createLink(t.createdLinkData),t.editedLinkData&&this.updateLink(t.editedLinkData)}}function Qi(e,t){let n="";return n+=`<h2 id=${B(e)} class=${St}>`,n+=`<span>${e}</span>`,n+=`<span class="${Mt} ${gi} ${We}">`,n+=`Arrange by ${Zi(t)}`,n+="</span>",n+="</h2>",n}function Zi(e){let t="";t+=`<select class="${mi}" name="Arrange-by-type">`;for(let n of e)t+=`<option value=${B(n)} data-type="${n}">${n}</option>`;return t+='<option value="no" selected disabled>Select option</option>',t+="</select>",t}function er(e){return`<option value=${B(e)} data-type="${e}">${e}</option>`}class tr{constructor(t,n,i){this.create(t,n),Nt()(this.node,()=>this.toggleSelect()),this.node.addEventListener("change",r=>{const s=Ae(this.node.getAttribute("id")),o=Ae(r.target.value);i({category:s,type:o})})}toggleSelect(){u.categoryHeader.getSelect(this.node).parentNode.classList.toggle(`${Mt}`)}removeSelectOption(t){u.categoryHeader.getOptionByType(this.node,t).remove()}createSelectOption(t){u.categoryHeader.getSelect(this.node).insertAdjacentHTML("afterbegin",er(t))}create(t,n){const i=u.getCategory(t);i.insertAdjacentHTML("afterbegin",Qi(t,n)),this.node=u.categoryHeader.get(i)}update(t,n){t&&this.removeSelectOption(t),n&&this.createSelectOption(n)}}class nr{constructor(t,n){this.category=n,this.component=null,this.linkTypes=null,A(this,t,[Yn]),N(this,t,[Di])}mount(){const t=this.selectLinkTypesByCategory(this.category);this.component=new tr(this.category,t,this.pickCategoryLinkType),this.linkTypes=t}update(){const t=this.selectLinkTypesByCategory(this.category);if(t.length<this.linkTypes.length){for(let n of this.linkTypes)if(!t.includes(n)){this.component.update(n),this.linkTypes=t;return}}if(t.length>this.linkTypes.length){for(let n of t)if(!this.linkTypes.includes(n)){this.component.update(null,n),this.linkTypes=t;return}}}}class it{constructor(t,n){this.store=t,this.category=n,this.component=null,this.child=null,A(this,t,[mt]),N(this,t,[Fi,Pi])}mount(){const t=this.selectLinksByCategory(this.category);this.component=new Ji(this.category,t,this.removeLink,this.openLinkFormForEditing),this.mountChild(this.store,this.category)}update(t){this.component.update(t),this.updateChild()}mountChild(t,n){this.child=new nr(t,n),this.child.mount()}updateChild(){this.child.update()}}class ir{constructor(t){this.store=t,this.component=null,this.children=[],A(this,t,[He,z,ri,Vn,Xn,xn,Un,Jn]),this.updateActions={"filters/linkTypeSelected":!0,"links/linkRemoved/fulfilled":!0,"links/linkCreated/fulfilled":!0,"links/linkEdited/fulfilled":!0}}mount(){const t=this.selectLinkCategories().sort();this.component=new Vi,this.mountChildren(this.store,this.selectLinkCategories().sort()),this.categories=t}update(){const t=this.selectAction();t in this.updateActions&&(this.component.update(),this.updateChildren(t))}mountChildren(t,n){this.children=n.map(i=>new it(t,i)),this.children.forEach(i=>i.mount())}updateChildren(t){const n=(i,r)=>{for(let s of this.children)if(s.category===i)return s.update(r)};switch(t){case"filters/linkTypeSelected":{const i=this.selectLinkType();return n(i.category,{linkType:i})}case"links/linkRemoved/fulfilled":{const i=this.selectRemovedLinkId(),r=this.selectRemovedLinkCategory();return n(r,{removedLinkId:i})}case"links/linkCreated/fulfilled":{const i=this.selectLinkCategories();for(let s of i)if(!this.categories.includes(s)){const o=new it(this.store,s);o.mount(),this.children.push(o),this.categories=i;return}const r=this.selectCreatedLink();return n(r.category,{createdLinkData:r})}case"links/linkEdited/fulfilled":{const i=this.selectEditedLink();return n(i.category,{editedLinkData:i})}}}}class rr{constructor(t){this.node=u.settingsMenu.get(),this.node.addEventListener("click",n=>{const i=n.target;u.settingsMenu.getOpenButton(i)&&t()})}create(){}update(){}}class sr{constructor(t){this.component=null,N(this,t,[Hi])}mount(){this.component=new rr(this.openLinkFormForCreation)}update(){this.component.update()}}class or{constructor(t){this.node=u.getSettingsWindow(),this.node.addEventListener("click",n=>{const i=n.target;u.getCloseButton(i)&&t()})}toggleWindow(){this.node.classList.toggle(`${Li}`)}create(){}update(){this.toggleWindow()}}function rt(e){let t="";for(let n of e)t+=`<option value="${n}">${n}</option>`;return t+='<option value="own">your own...</option>',t}class cr{constructor(t,n,i,r){this.node=u.linkForm.get(),this.categorySelect=u.linkForm.getCategorySelect(this.node),this.typeSelect=u.linkForm.getTypesSelect(this.node),this.create(t,n),this.dataTemplate={src:"",description:"",type:"",category:""},this.node.addEventListener("click",s=>{s.preventDefault();const o=s.target;if(o===this.node.add)i({...this.getFormData()});else if(o===this.node.edit){const c=u.link.getById(document,this.editingLinkId);c.style.visibility="hidden",r({...this.getFormData(),_id:this.editingLinkId})}}),this.node.addEventListener("change",s=>{const o=s.target;if(o.tagName==="SELECT"&&o.value==="own"){const c=document.createElement("input");c.type="text",c.name=o.name,c.className=`${Mi}`,c.oninput=c.onblur=a=>{a.target.value||(c.replaceWith(o),o.value="")},o.replaceWith(c)}})}getFormData(){const t={...this.dataTemplate};for(let n in t)t[n]=this.node[n].value;return t}setFormData(t){for(let n in this.dataTemplate)this.node[n].value=t[n]}reset(){this.node.category.tagName==="INPUT"&&this.node.category.replaceWith(this.categorySelect),this.node.type.tagName==="INPUT"&&this.node.type.replaceWith(this.typeSelect);for(let t in this.dataTemplate)this.node[t].value=""}setCreateionMode(){this.reset(),this.node.edit.classList.add(`${J}`),this.node.add.classList.remove(`${J}`)}setEditingMode(t){this.reset(),this.editingLinkId=t._id,this.setFormData(t),this.node.edit.classList.remove(`${J}`),this.node.add.classList.add(`${J}`)}create(t,n){this.categorySelect.innerHTML=rt(t),this.typeSelect.innerHTML=rt(n)}updateOptions(t){const{categories:n,types:i}=t;this.create(n,i)}update(t,n,i){t==="creation"&&this.setCreateionMode(),t==="editing"&&this.setEditingMode(n),i&&this.updateOptions(i)}}class ar{constructor(t){this.component=null,this.mode=null,A(this,t,[He,Gn,ti,Kn,z]),N(this,t,[ji,zi]),this.updateActions={"ui/linkFormModeChanged":!0,"links/linkRemoved/fulfilled":!0,"links/linkCreated/fulfilled":!0,"links/linkEdited/fulfilled":!0}}mount(){const t=this.selectLinkCategories(),n=this.selectLinkTypes();this.component=new cr(t,n,this.createNewLink,this.editPickedLink),this.categories=t,this.types=n}update(){switch(this.selectAction()){case"ui/linkFormModeChanged":{this.component.update(this.selectLinkFormMode(),this.selectLinkForEdit());return}case"links/linkRemoved/fulfilled":case"links/linkCreated/fulfilled":case"links/linkEdited/fulfilled":{const n=this.selectLinkCategories(),i=this.selectLinkTypes();this.component.update(null,null,{categories:n,types:i});return}}}}class lr{constructor(t){this.store=t,this.component=null,this.child=null,A(this,t,[z]),N(this,t,[Wi]),this.updateActions={"ui/settingsWindowToggled":!0}}mount(){this.component=new or(this.closeSettingsWindow),this.mountChild()}update(){this.selectAction()in this.updateActions&&this.component.update(),this.updateChild()}mountChild(){this.child=new ar(this.store),this.child.mount()}updateChild(){this.child.update()}}class ur{constructor(t){this.categoryMenu=new xi(t),this.menuOpener=new qi(t),this.commonComponent=new Yi(t),this.content=new ir(t),this.settingsMenu=new sr(t),this.settingsWindow=new lr(t)}mount(){this.categoryMenu.mount(),this.menuOpener.mount(),this.commonComponent.mount(),this.content.mount(),this.settingsMenu.mount(),this.settingsWindow.mount()}update(){this.categoryMenu.update(),this.content.update(),this.menuOpener.update(),this.commonComponent.update(),this.settingsMenu.update(),this.settingsWindow.update()}}async function dr(){await Hn();const t={links:{data:await ue.loadLinks()},ui:{menuCategory:Ne(),isMenuOpened:!1,isSmallScreen:Re()}},n=li(t),i=new ur(n);i.mount(),n.store.subscribe(()=>i.update())}dr();
